{% extends "base.html" %}

{% block title %}Record Details - Freakin Beats{% endblock %}

{% block extra_css %}
{% assets "detail_css" %}
<link rel="stylesheet" href="{{ ASSET_URL }}">
{% endassets %}
<style>
    /* Icon styling for loading and error states */
    .loading .lucide,
    .error .lucide {
        width: 2rem;
        height: 2rem;
        margin-right: 0.75rem;
        vertical-align: middle;
    }
</style>
{% endblock %}

{% block header_title %}
<a href="/" class="back-button">‚Üê Back to Shop</a>
Freakin Beats
{% endblock %}

{% block content %}
<div class="detail-container">
    <div class="loading" id="loading">
        <i data-lucide="disc-3"></i>Loading record details...
    </div>
    
    <div class="error" id="error" style="display: none;">
        <i data-lucide="alert-circle"></i>Error loading record details. Please try again.
    </div>

    <div class="detail-content" id="detail-content" style="display: none;">
        <div class="vinyl-image-container">
            <div id="vinyl-image-container"></div>
        </div>
        
        <div class="vinyl-info">
            <div class="vinyl-title" id="vinyl-title"></div>
            <div class="vinyl-artist" id="vinyl-artist"></div>
            <div class="vinyl-price" id="vinyl-price"></div>
            
            <div class="detail-grid">
                <div class="detail-item">
                    <div class="detail-label">Label</div>
                    <div class="detail-value" id="vinyl-label"></div>
                </div>
                <div class="detail-item">
                    <div class="detail-label">Year</div>
                    <div class="detail-value" id="vinyl-year"></div>
                </div>
                <div class="detail-item">
                    <div class="detail-label">Condition</div>
                    <div class="detail-value" id="vinyl-condition"></div>
                </div>
                <div class="detail-item">
                    <div class="detail-label">Sleeve</div>
                    <div class="detail-value" id="vinyl-sleeve"></div>
                </div>
            </div>
            
            <div class="detail-item" style="grid-column: 1 / -1;">
                <div class="detail-label">Comments</div>
                <div class="detail-value" id="vinyl-comments"></div>
            </div>
            
            <button class="add-to-cart" id="add-to-cart">
                Add to Cart
            </button>
        </div>
        
        <div class="video-player-container" id="video-player-container" style="display: none;">
            <div class="video-player-header">
                <h3>Listen on YouTube</h3>
            </div>
            <div class="main-video">
                <iframe id="main-video-iframe" 
                        width="100%" 
                        height="315" 
                        frameborder="0" 
                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                        allowfullscreen>
                </iframe>
            </div>
            <div class="video-thumbnails" id="video-thumbnails">
                <!-- Video thumbnails will be populated by JavaScript -->
            </div>
        </div>
        
        <div class="label-info-container" id="label-info-container" style="display: none;">
            <div class="label-info-header">
                <h3>AI Generated Record Label Summary</h3>
            </div>
            <div class="label-links" id="label-links">
                <!-- Label links will be populated by JavaScript -->
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', filename='js/detail.js') }}"></script>
{% endblock %}
